# monitor_k8s_yaml.py

Kubernetes の YAML マニフェストファイルを監視し、変更があった場合にタイムスタンプ付きで自動バックアップを作成する Python スクリプトです。  
`kubectl apply` を頻繁に使用する開発環境や、手動編集時の履歴管理に非常に便利です。


## 主な機能

- `.yaml` ファイルの変更・作成を検知
- タイムスタンプ付きファイル名で自動バックアップ
- 監視間隔は 10 秒ごと（設定変更可）
- Python 標準ライブラリのみ使用（外部依存なし）

---

## ディレクトリ構成（デフォルト）

```
/home/c0a22103/
├── monitor_k8s_yaml.py
├── sample.yaml
└── k8s-backup/
    ├── 20250707_154830_sample.yaml
    └── ...
```

---

## 使用方法

### 動作環境

- Python 3.12.3

### 実行コマンド
```bash
python3 monitor_k8s_yaml.py
```
実行後、指定されたディレクトリ内の `.yaml` ファイルを監視し、変更を検出するとバックアップフォルダにコピーを作成します。

---

## 設定変更

変数をスクリプト内で変更することで、監視対象・バックアップ先のディレクトリを変更できます。
```python
watch_dir = "/任意の/監視ディレクトリ"
backup_dir = "/任意の/バックアップ保存先"
```

監視間隔を変更したい場合は数値を調整してください（単位：秒）
```python
time.sleep(10)
```

---

## 注意事項

- `.yaml` 以外の拡張子ファイルは対象外です
- 削除やリネームには対応していません
- バックアップファイルが累積するため、定期的な整理をおすすめします
- 停止するには `Ctrl + C` を使用してください
